<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Add Dish</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <header class="topbar">
      <div class="brand">My Kitchen</div>
      <nav><a class="btn" href="{{ url_for('index') }}">Back</a></nav>
    </header>

    <main class="container card">
      <h2>Add Dish</h2>
      <form action="{{ url_for('add_dish_route') }}" method="post" class="simple-form">
        <label>Dish name<br><input name="name" required></label><br>
        <label>Price<br><input name="price" type="number" step="any" value="0.01" min="0.01"></label><br>

        <h3>Ingredients</h3>
        <div id="ingredients">
          <div class="row">
            <input name="item_name[]" placeholder="Ingredient name">
            <input name="item_qty[]" placeholder="Quantity needed" type="number" step="any" min="0.0001">
            <select name="item_unit[]">
              {% for u in units %}<option>{{ u }}</option>{% endfor %}
            </select>
            <button type="button" onclick="this.parentElement.remove()">Remove</button>
          </div>
        </div>

        <p>
          <button type="button" class="btn" onclick="addRow()">Add ingredient</button>
          <button type="submit" class="btn">Create dish</button>
        </p>
      </form>
    </main>

    <script>
      function addRow(){
        const div = document.createElement('div');
        div.className = 'row';
        div.innerHTML = '<input name="item_name[]" placeholder="Ingredient name"> ' +
                        '<input name="item_qty[]" placeholder="Quantity needed" type="number" step="any" min="0.0001"> ' +
                        '<select name="item_unit[]">{% for u in units %}<option>{{ u }}</option>{% endfor %}</select> ' +
                        '<button type="button" onclick="this.parentElement.remove()">Remove</button>';
        document.getElementById('ingredients').appendChild(div);
      }
    </script>
  </body>
</html>
